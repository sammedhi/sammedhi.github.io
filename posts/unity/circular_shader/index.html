<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>WorldWrapper | Impyou&#39;s blog</title>
<meta name="keywords" content="">
<meta name="description" content="In today&rsquo;s article we will speak about an experiment I wanted to lead to make plateformer more interesting in VR ?! 2D Plateformer are cool ! But can it be cooler to play them in VR ? Is there a way to get full profit of the 360 environment ? Plane scrolling can be interesting but in VR it doesn&rsquo;t feel like we really get to enjoy the VR aspect. So how could we still keep the 2D idea of the game yet use the 3D aspect of VR, What about wrapping the world around us ?">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/unity/circular_shader/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.36819bea596090d8b48cf10d9831382996197aa7e4fc86f792f7c08c9ca4d23b.css" integrity="sha256-NoGb6llgkNi0jPENmDE4KZYZeqfk/Ib3kvfAjJyk0js=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/unity/circular_shader/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Impyou&#39;s blog (Alt + H)">Impyou&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      WorldWrapper
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h1>
    <div class="post-meta"><span title='2025-06-22 11:22:05 +0200 CEST'>June 22, 2025</span>

</div>
  </header> 
  <div class="post-content"><p>In today&rsquo;s article we will speak about an experiment I wanted to lead to make plateformer more interesting in VR ?! 2D Plateformer are cool ! But can it be cooler to play them in VR ? Is there a way to get full profit of the 360 environment ? Plane scrolling can be interesting but in VR it doesn&rsquo;t feel like we really get to enjoy the VR aspect. So how could we still keep the 2D idea of the game yet use the 3D aspect of VR, What about wrapping the world around us ?</p>
<p>This is what we will explore in this article !</p>
<p>Let&rsquo;s get into it.</p>
<h2 id="how">How<a hidden class="anchor" aria-hidden="true" href="#how">#</a></h2>
<p>Let&rsquo;s talk about the different way we could approach to resolve this, I can think of 3 ways to do so.</p>
<h3 id="1-make-curved-assets">1. Make curved assets<a hidden class="anchor" aria-hidden="true" href="#1-make-curved-assets">#</a></h3>
<p>So the first option would be to make your assets already curved, it can be done in blender when you create your asset, however this idea doesn&rsquo;t seem promising, the first one being that it take a long time to make assets. Also it will be hard to maintain, let&rsquo;s suppose you want to change the curve of the world it will too much effort to change every damn assets. Also another negative point is that you now need to create a special physics system for your curved world. So &hellip; Nahhh</p>
<h3 id="2-transform-geometry-when-building">2. Transform geometry when building<a hidden class="anchor" aria-hidden="true" href="#2-transform-geometry-when-building">#</a></h3>
<p>Another option would be to curve the asset with some script when it&rsquo;s added to the project or to the scene, honestly it can be a good idea however you now have to implement your own physics system, editor system etc &hellip; It can really hard to manage, so maybe let&rsquo;s keep it for another experiment. We probably can do simpler &hellip;</p>
<h3 id="3-i-summon-you-shader">3. I summon you &ldquo;Shader&rdquo;<a hidden class="anchor" aria-hidden="true" href="#3-i-summon-you-shader">#</a></h3>
<p>What about faking it ?? I mean we&rsquo;re developer, we fake a ton of things. So can we fake it ? As everything we do, Obviously we can !
And the solution is the ultimate tool at faking visual effect THE SHADER. This time thanks to shaders we&rsquo;ll just fake the drawing of objects meaning that the object will exist in our 2D map but we will show it to the player as some circular world enveloping him.</p>
<p>This solution seems promising, first because it&rsquo;s should not be that hard to make, but since we fake the drawing aspect we still can work with the basics physics of unity plus changing the wrapping parameters should be as easy as moving a slider with you mouse.</p>
<h3 id="principle">Principle<a hidden class="anchor" aria-hidden="true" href="#principle">#</a></h3>
<p>So how can we bend our object using shader, the idea will be to wrap our 2D map onto a circle of radius r.</p>
<p>Let&rsquo;s first make some assumption for our system:</p>
<ul>
<li>
<p>Our world will be build on a plane, our plane is defined by z = some constant, so it spans the xy axis.</p>
</li>
<li>
<p>The y coordinate will be left untouched, so we can write our coords as (x, z). We will wrap our map around a circle with center (0, 0)</p>
</li>
<li>
<p>Our map x axis will be bound between [-w, w], w being our map width. The map points with x = 0 won&rsquo;t be moved.</p>
</li>
</ul>
<h3 id="theory">Theory<a hidden class="anchor" aria-hidden="true" href="#theory">#</a></h3>
<p>So from our assumptions let&rsquo;s speak about the math behind it ! First let&rsquo;s draw a diagram</p>
<p>&hellip;</p>
<p>In here we have our map that is tangant to our circle. The goal being to wrap the world around the cirle so let&rsquo;s first put some reference points. So we know where these reference points should be mapped, there is no math behind this, this is a design decision I made here so if you want to change it feel free to, you only will need to adapt your formulas to fit your design. Here we need to find a function to perform such a transformation. We could find many, but let&rsquo;s use the simplest one possible, a linear mapping.
So what does that mean, it mean that the percent of start position will be the percent in the circle perimeter. to give a visual example if we take this the point in the middle of the line, it should be on the middle of the (half) perimeter.</p>
<p>&hellip;</p>
<p>Since we decided to use a linear mapping with search f(x) = ax, with f the function to transform the object position on the x axis to the angle theta of the point in the circular map. So we need to find our coefficient a.
So to determine a, knowing our initial space is [0, w] and we want to convert to [0, PI] we can determine that f(0) = 0, f(w) = PI. For 0 this is obvious a * 0, it will work for any a, but for w we have a * w = PI. We can then determin a = PI / w. It gives us our transformation funtion f(x) = (PI / w) * x.
So once we have the angle we can determine the position in the circle perimeter of our point using some trigonometry.
$(xc, yc) = (sin(theta), cos(theta)) * radius$</p>
<p>Now we are able to map the original position to the final one, to the final point, let&rsquo;s write the code !</p>
<h2 id="application">Application<a hidden class="anchor" aria-hidden="true" href="#application">#</a></h2>
<p>So let&rsquo;s write a shader for that</p>
<p>//</p>
<p>And that should be it let&rsquo;s get a look !</p>
<p>//</p>
<p>Arf we could not call that bending, let&rsquo;s look at the object</p>
<p>//</p>
<p>It make sense we only change the positions of the vertex so if you only have that little vertex you cannot really bend it
Let&rsquo;s add more details to our cube,</p>
<p>//</p>
<p>Ok now have our cube, let&rsquo;s bend it !</p>
<p>//</p>
<p>Yes we&rsquo;re g&hellip; good, are we ? Something strange is happening when I&rsquo;m looking on the side</p>
<p>//</p>
<p>The object disapear, that&rsquo;s because Unity will cull objects when there bounding box don&rsquo;t appear in screens, we
did change the vertex positions but not the bounding boxes. Luckily it&rsquo;s quite easy to do it, but this time we
need to write some C# scripts.</p>
<p>//</p>
<p>Ok, Does it work now ?</p>
<p>//</p>
<p>Yes, this time we got it ! As we can see we can start from our 2D plateformer to a circular plateformer ! And the physics work as intended
because in reality we&rsquo;re still playing a 2D game.</p>
<p>Just let&rsquo;s be careful since our objects can go out of screen we can still see them since our formula follow a sinusoidal pattern.
However the objects will physically be out of the scene, to go further we could either implement some scrolling in our world,
or reset the position of the character when we reach the limit, all this is up to your game !</p>
<p>I wanted to experiment if it was possible to create additional wrapping so here some more !</p>
<p>// Cube mapping</p>
<p>// Sphere mapping</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>Pros and cons.</p>
<p>I think there are a ton of possibilites and it can make VR game damn fun, I&rsquo;d love to see some game using this principle in VR !
I might try to experiment more with it and maybe make something playable, tell me what you think about it.</p>
<p>Also here the source for anyone who desire to play with it</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Impyou&#39;s blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
